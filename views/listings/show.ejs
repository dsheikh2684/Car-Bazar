<% layout("/layouts/boilerplate") %>
<body>
    <!-- Car Detail Section -->
  <div class="container my-5">
    <div class="row g-4">
      
      <!-- Car Image -->
      <div class="col-lg-6 mb-4">
      <div id="carImagesCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <% carData.images.forEach((img, index) => { %>
            <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
              <img src="<%= img.url %>" class="d-block w-100 rounded" alt="Car Image">
            </div>
          <% }) %>
        </div>

        <!-- Carousel controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#carImagesCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carImagesCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <!-- Thumbnails -->
      <div class="d-flex justify-content-center flex-wrap gap-2 mt-2">
        <% carData.images.forEach((img, index) => { %>
          <img src="<%= img.url %>" class="thumbnail-img rounded" style="width: 80px; height: 60px; object-fit: cover; cursor: pointer;" data-bs-target="#carImagesCarousel" data-bs-slide-to="<%= index %>">
        <% }) %>
      </div>
    </div>


      <!-- Car Details -->
      <div class="col-md-6">
        <div class="car-details">
          <h2><%=carData.name%> <%=carData.model%></h2>
          <p class="price">â‚¹ <%=carData.price.toLocaleString("en-IN")%></p>
          
          <h5 class="mt-4">Car Details</h5>
          <table class="details-table w-100">
            <tr><td><strong>Fuel Type:</strong></td><td><%=carData.fuel%></td></tr>
            <tr><td><strong>Kms Driven:</strong></td><td><%=carData.kms%> Kms</td></tr>
            <tr><td><strong>Colour:</strong></td><td><%=carData.colour%></td></tr>
            <tr><td><strong>Number of Owners:</strong></td><td><%=carData.owner%></td></tr>
            <tr><td><strong>Insurance Type:</strong></td><td><%=carData.insurance%></td></tr>
            <tr><td><strong>Insurance Expiry:</strong></td><td><%=carData.i_expiry.toLocaleDateString()%></td></tr>
            <tr><td><strong>Manufacturing Year:</strong></td><td><%=carData.year%></td></tr>
          </table>
        </div>
        <br/>
        <% if(currUser && carData.dealer.equals(currUser._id)){ %>
          <a class="btn btn-danger" href="/listings/<%=carData._id%>/edit">Edit</a>
          <form class="d-inline-block" method="POST" action="/listings/<%=carData._id%>?_method=DELETE">
              <button class="btn btn-dark">Delete</button>
          </form>
        <% } %>
        
      </div>

    </div>
  </div>

</body>
